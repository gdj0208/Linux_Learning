# ì‹œê·¸ë„

## 1ï¸âƒ£Â ì‹œê·¸ë„
- ì¸í„°ëŸ½íŠ¸ë¡œ í”„ë¡œì„¸ìŠ¤ì— ë­”ê°€ ë°œìƒí•¨ì„ ì•Œë¦¬ëŠ” ê°„ë‹¨í•œ ë©”ì‹œì§€ë¥¼ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë³´ë‚´ëŠ” ê²ƒ
- ë³´í†µ ì‹œê·¸ë„ë¡œ ì „ë‹¬ë˜ëŠ” ë©”ì‹œì§€ëŠ” ë¬´ì—‡ì´ ë°œìƒí–ˆëŠ”ì§€ë¥¼ í‘œì‹œí•˜ëŠ” ë¯¸ë¦¬ ì •ì˜ëœ ìƒìˆ˜ë¥¼ ì‚¬ìš©

**[ ì‹œê·¸ë„ì´ë€? ]**
- ì‹œê·¸ë„ : ì†Œí”„íŠ¸ì›¨ì–´ ì¸í„°ëŸ½íŠ¸
- ë°œìƒ ìš”ì¸

    1. 0ìœ¼ë¡œ ë‚˜ëˆ„ê¸°ì™€ ê°™ì€ ì˜ˆì™¸ ì¼€ì´ìŠ¤
    2. Kill()ê³¼ ê°™ì´ ì‹œê·¸ë„ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë¡œ íƒ€ í”„ë¡œì„¸ìŠ¤ì— ì‹œê·¸ë„ì„ ë³´ë‚´ëŠ” ê²½ìš°
    3. ì‚¬ìš©ìì˜ ì¸í„°ëŸ½íŠ¸ (^C ë“±)

**[ ì‹œê·¸ë„ ì²˜ë¦¬ ë°©ë²• ]**
1. ê¸°ë³¸ ë™ì‘ ìˆ˜í–‰
    - í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
    - í”„ë¡œì„¸ìŠ¤ ìˆ˜í–‰ ì¼ì‹œ ì¤‘ì§€ / ì¬ì‹œì‘
2. ì‹œê·¸ë„ ë¬´ì‹œ
3. ì§€ì •ëœ í•¨ìˆ˜ í˜¸ì¶œ
    - ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ : ì‹œê·¸ë„ ì²˜ë¦¬ë¥¼ ìœ„í•´ ì§€ì •í•˜ëŠ” í•¨ìˆ˜
    - ë¯¸ë¦¬ í•¨ìˆ˜ ì§€ì • 
    - ì‹œê·¸ë„ì„ ë°›ì„ ì‹œ : ê¸°ì¡´ ì²˜ë¦¬ ì‘ì—…ì„ ì¤‘ì§€ -> í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ì²˜ë¦¬

**[ ì‹œê·¸ë„ ì¢…ë¥˜ ]**
![alt text](image-1.png)

**[ ì½”ë“œ ]**
```c
int kill(pid_t pid, int sig);
int raise(int sig);
void abort(void);
```





## 2ï¸âƒ£ ì‹œê·¸ë„ ê´€ë ¨ í•¨ìˆ˜


### ğŸ¯Â ì‹œê·¸ë„ ë³´ë‚´ê¸° : kill
```c
#incldue <sys/types.h>
#include <signal.h>

int kill(pid_t pid, int sig);
```

**[ ì¸ì ]**
- pid_t pid : ì‹œê·¸ë„ì„ ë°›ì„ í”„ë¡œì„¸ìŠ¤ì˜ PID
    - pid > 0 : pidë¡œ ì§€ì •í•œ í”„ë¡œì„¸ìŠ¤ì— ì‹œê·¸ë„ì„ ì „ì†¡
    - pid == 0 : PGIDê°€ ì‹œê·¸ë„ì„ ë³´ë‚´ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ PGIDì™€ ê°™ì€ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì— ì‹œê·¸ë„ì„ ì „ì†¡
    - pid == -1 : í”„ë¡œì„¸ìŠ¤ì˜ UIDê°€ rootê°€ ì•„ë‹ ì‹œ, í”„ë¡œì„¸ìŠ¤ UIDì™€ ê°™ì€ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì—ê²Œ ì‹œê·¸ë„ ì „ì†¡
    - pid < -1 : í”„ë¡œì„¸ìŠ¤ ê·¸ë£¹ì— ì†í•˜ê³  ì‹œê·¸ë„ì„ ë³´ë‚¼ ê¶Œí•œì´ ìˆëŠ” ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì— ì‹œê·¸ë„ ì „ì†¡
- int sig : pidë¡œ ì§€ì •í•œ í”„ë¡œì„¸ìŠ¤ì— ë³´ë‚´ëŠ” ì‹œê·¸ë„

**[ ì½”ë“œ ì˜ˆì‹œ ]**
```c
// ex_1.c

#include <sys/types.h>
#include <unistd.h>
#include <signal.h>
#include <stdio.h>

int main(void) {
    printf("Before SIGCONT Signal to parent.\n");
    kill(getppid(), SIGCONT);

    printf("Before SIGQUIT Signal to me.\n");
    kill(getpid(), SIGQUIT);

    printf("After SIGQUIT Signal.\n");
    return 0;
}
```



### ğŸ¯Â ì‹œê·¸ë„ ë³´ë‚´ê¸° : raise()
**[ raise() ì˜ˆì‹œ ]**
```c
#include <signal.h>
int raise(int sig)
```
- sig : ë³´ë‚´ë ¤ëŠ” ì‹œê·¸ë„ ë²ˆí˜¸

**[ íŠ¹ì§• ]**
- í˜¸ì¶œí•œ í”„ë¡œì„¸ìŠ¤ì— ì¸ìë¡œ ì§€ì •í•œ ì‹œê·¸ë„ì„ ì „ì†¡
- ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ í˜¸ì¶œ -> í•¸ë“¤ëŸ¬ì˜ ìˆ˜í–‰ì´ ëë‚  ë•Œê¹Œì§€ raise()ëŠ” ë¦¬í„´í•˜ì§€ ì•ŠìŒ



### ğŸ¯Â ì‹œê·¸ë„ ë³´ë‚´ê¸° : abort()
**[ abort() ]**
```c
#include <stdlib.h>
void abort(void);
```
- í˜¸ì¶œí•œ í”„ë¡œì„¸ìŠ¤ì— SIGBART ì‹œê·¸ë„ ì „ì†¡
    - SIGBART ì‹œê·¸ë„ : í”„ë¡œì„¸ìŠ¤ë¥¼ ë¹„ì •ìƒì ìœ¼ë¡œ ì¢…ë£Œì‹œí‚¤ê³  ì½”ì–´ ë¤í”„ íŒŒì¼ì„ ìƒì„± (ë¦¬í„´ ì•ˆí•¨)





## 3ï¸âƒ£Â ì‹œê·¸ë„ í•¸ë“¤ëŸ¬
- í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ ì „ì— ì²˜ë¦¬í•  ì‘ì—…ì´ ë‚¨ì•„ ìˆì„ ì‹œ ì‹œê·¸ë„ì„ ì²˜ë¦¬í•  í•¨ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒ.

```cpp
sighandler_t signal(int signum, sighandler_t handler);
sighandler_t sigset(int sig, sighandler_t disp);
```

### ğŸ¯Â ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ ì§€ì • : signal()

```c
#include <signal.h>
typedef void (*sighandler_t)(int);
sighandler_t signal(int signum, sighandler_t handler);
```

**[ ì¸ì ]**
- signum : ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ë¡œ ì²˜ë¦¬í•˜ë ¤ëŠ” ì‹œê·¸ë„
- handler : ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ì˜ í•¨ìˆ˜ëª…

**[ í•¨ìˆ˜ íŠ¹ì§• ]**
- ì‹œê·¸ë„ì„ ë°›ì„ ë•Œ í•´ë‹¹ ì‹œê·¸ë„ì„ ì²˜ë¦¬í•  í•¨ìˆ˜ë‚˜ ìƒìˆ˜ë¥¼ ì§€ì • ê°€ëŠ¥
- signum : SIGKILLê³¼ SIGSTOP ì‹œê·¸ë„ì„ ì œì™¸í•œ ëª¨ë“  ì‹œê·¸ë„ ì§€ì • ê°€ëŠ¥
- handler : signumìœ¼ë¡œ ì§€ì •í•œ ì‹œê·¸ë„ì„ ë°›ì•˜ì„ ë•Œ ì²˜ë¦¬í•  ë°©ë²•ì„ ì§€ì •

**[ í•¸ë“¤ëŸ¬ ì„¤ì • ]**
- ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ ì£¼ì†Œ
- SIG_IGN : ì‹œê·¸ë„ì„ ë¬´ì‹œí•˜ë„ë¡ ì§€ì •
- SIG_DFL " ì‹œê·¸ë„ì˜ ê¸°ë³¸ ì²˜ë¦¬ ë°©ë²•ì„ ìˆ˜í–‰í•˜ë„ë¡ ì§€ì •

**[ í•¸ë“¤ëŸ¬ ì„¤ì • ]**
```c
// ex_2.c

#include <unistd.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>

void handler(int signo) {
     printf("Signal Handler Signal Number : %d\n", signo);
     psignal(signo, "Received Signal");
}

int main(void) {
    void (*hand)(int);

    hand = signal(SIGINT, handler);
    if (hand == SIG_ERR) {
        perror("signal");
        exit(1);
    }

    printf("Wait 1st Ctrl+C... : SIGINT\n");
    pause();
    printf("After 1st Signal Handler\n");
    printf("Wait 2nd Ctrl+C... : SIGINT\n");
    pause();
    printf("After 2nd Signal Handler\n");
    return 0;
}
```

**[ ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ : ì†”ë¼ë¦¬ìŠ¤ì˜ ê²½ìš° ]**
```c
#include <unistd.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>

void sig_handler(int signo) {
    void (*hand)(int);

    hand = signal(SIGINT, sig_handler);
    if(hand == SIG_ERR) {
        perror("signal");
        exit(1);
    }
    printf("Signal Handler Signal Number : %d\n", signo);
    psignal(signo, "Received Signal");
}
```



### ğŸ¯Â ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ ì§€ì • : sigset()

```c
#include <signal.h>
sighandler_t sigset(int sig, sighandler_t disp);
```
- sig : ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ë¡œ ì²˜ë¦¬í•˜ë ¤ëŠ” ì‹œê·¸ë„
    - SIGKILL, SIGSTOPì„ ì œì™¸í•œ ì–´ë–¤ ì‹œê·¸ë„ë„ ì§€ì • ê°€ëŠ¥
- disp : ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ì˜ í•¨ìˆ˜ëª…
    - ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ì˜ ì£¼ì†Œ, SIG_IGN, SIG_DFLì¤‘ í•˜ë‚˜ë¥¼ ì§€ì •

**[ í•¨ìˆ˜ íŠ¹ì§• ]**
- ì‹¤íŒ¨ì‹œ SIG_ERRì„ ë¦¬í„´

**[ ì˜ˆì‹œ ]**
```c
#include <unistd.h>
#include <signal.h>
#include <stdlib.h>
#include <stdio.h>

void sig_handler(int signo) {
    printf("Signal Handler Signal Number : %d\n", signo);
    psignal(signo, "Received Signal");
}

int main(void) {

    //sigset(SIGINT, SIG_DFL);
    sigset(SIGINT, SIG_IGN);
    //sigset(SIGINT, sig_handler);
#if 0
    if (hand == SIG_ERR) {
        perror("signal");
        exit(1);
    }
#endif
    printf("Wait 1st Ctrl+C... : SIGINT\n");
    pause();
    printf("After 1st Signal Handler\n");
    printf("Wait 2nd Ctrl+C... : SIGINT\n");
    pause();
    printf("After 2nd Signal Handler\n");
}
```




## 4ï¸âƒ£Â ì‹œê·¸ë„ ì§‘í•©
- POSIXì—ì„œ ë³µìˆ˜ì˜ ì‹œê·¸ë„ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë„ì…í•œ ê°œë…
- ì‹œê·¸ë„ ì§‘í•© ì‚¬ìš© ì‹œ ì—¬ëŸ¬ ì‹œê·¸ë„ì„ ì§€ì •í•´ ì²˜ë¦¬ ê°€ëŠ¥

```cpp
int sigemptyset(sigset_t *set);
int sigfillset(sigset_t *set);
int sigaddset(sigset_t *set, int signum);
int sigdelset(sigset_t *set, int signum);
int sigismember(sigset_t *set, int signum);
```


### ğŸ¯ ì‹œê·¸ë„ ì§‘í•© ê°œë…
- ì‹œê·¸ë„ ì§‘í•© : ì‹œê·¸ë„ì„ ë¹„íŠ¸ ë§ˆìŠ¤í¬ë¡œ í‘œí˜„í•œ ê²ƒ
- ê° ë¹„íŠ¸ê°€ íŠ¹ì • ì‹œê·¸ë„ê³¼ 1:1ë¡œ ì—°ê²°ë¨
- ì‹œìŠ¤í…œì—ì„œëŠ” ì‹œê·¸ë„ ì§‘í•© ì²˜ë¦¬ë¥¼ ìœ„í•´ sigset_t êµ¬ì¡°ì²´ë¥¼ ì œê³µ

**[ ë¦¬ëˆ…ìŠ¤ ]**
    ```
    #typedef struct {
        unsigned long _val[_NSIG_WORDS];
    } sigset_t;
    ```

**[ ì†”ë¼ë¦¬ìŠ¤ ]**
    ```
    #typedef struct {
        unsigned int _sigbits[4];
    } sigset_t;
    ```


### ğŸ¯ sigemptyset()
```c
#include <signal.h>
int sigemptyset(sigset_t *set);
```
- set : ë¹„ìš°ë ¤ëŠ” ì‹œê·¸ë„ ì§‘í•©ì˜ ì£¼ì†Œ

**[ íŠ¹ì§• ]**
- ëª¨ë“  ì‹œê·¸ë„ì„ ë¹„ìš°ê³  ë¹ˆ ì§‘í•©ìœ¼ë¡œ ë§Œë“¬ 
- ì‹œê·¸ë„ ì§‘í•©ì˜ ëª¨ë“  ë¹„í‹€ë¥¼ 0ìœ¼ë¡œ ì„¤ì •



### ğŸ¯ sigfillset()
```c
#include <signal.h>
int sigfillset(sigset_t * set);
```
- set : ë¹„ìš°ë ¤ëŠ” ì‹œê·¸ë„ ì§‘í•©ì˜ ì£¼ì†Œ

**[ íŠ¹ì§• ]**
- ëª¨ë“  ì‹œê·¸ë„ì„ ë‹¤ ì±„ìš´ ì§‘í•©ìœ¼ë¡œ ë§Œë“¬ 
- ì‹œê·¸ë„ ì§‘í•©ì˜ ëª¨ë“  ë¹„í‹€ë¥¼ 1ë¡œ ì„¤ì •



### ğŸ¯ ì‹œê·¸ë„ ì§‘í•©ì— ì‹œê·¸ë„ ì„¤ì • ì¶”ê°€ : sigaddset()
```c
#include <signal.h>
int sigaddset(sigset_t *set, int signum);
```
- set : ì‹œê·¸ë„ì„ ì¶”ê°€í•˜ë ¤ëŠ” ì‹œê·¸ë„ ì§‘í•©ì˜ ì£¼ì†Œ
- signum : ì‹œê·¸ë„ ì§‘í•©ì— ì¶”ê°€ë¡œ ì„¤ì •í•˜ë ¤ëŠ” ì‹œê·¸ë„



### ğŸ¯ ì‹œê·¸ë„ ì§‘í•©ì— ì‹œê·¸ë„ ì„¤ì • ì œê±° : sigdelset()
```c
#include <signal.h>
int sigdelset(sigset_t *set, int signum);
```
- set : ì‹œê·¸ë„ì„ ì¶”ê°€í•˜ë ¤ëŠ” ì‹œê·¸ë„ ì§‘í•©ì˜ ì£¼ì†Œ
- signum : ì‹œê·¸ë„ ì§‘í•©ì— ì¶”ê°€ë¡œ ì„¤ì •í•˜ë ¤ëŠ” ì‹œê·¸ë„



### ğŸ¯ ì‹œê·¸ë„ ì§‘í•©ì— ì‹œê·¸ë„ ì„¤ì • ì œê±° : sigismember()
```c
#include <signal.h>
int sigismember(sigset_t *set, int signum);
```
- set : ì‹œê·¸ë„ì„ ì¶”ê°€í•˜ë ¤ëŠ” ì‹œê·¸ë„ ì§‘í•©ì˜ ì£¼ì†Œ
- signum : ì‹œê·¸ë„ ì§‘í•©ì— ì¶”ê°€ë¡œ ì„¤ì •í•˜ë ¤ëŠ” ì‹œê·¸ë„



### ğŸ¯ ì‹œê·¸ë„ ì§‘í•© ì²˜ë¦¬ í•¨ìˆ˜ ì‚¬ìš© ì˜ˆì œ
```c
// ex_4.c

#include <unistd.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>

int main(void) {

    sigset_t st;
 
    sigemptyset(&st);
  
    sigaddset(&st, SIGINT);
    sigaddset(&st, SIGQUIT);
  
    if (sigismember(&st, SIGINT))
        printf("SIGINT is setting.\n");
 
    printf("** Bit Pattern: %lx\n",st.__val[0]);
  
    return 0;
}
```





## 5ï¸âƒ£ ì‹œê·¸ë„ ì œì–´ í•¨ìˆ˜
- ì‹œê·¸ë„ì„ ë°›ì•„ ì´ë¥¼ ì²˜ë¦¬í•  ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ë¥¼ ì§€ì •í•  ë¿ ë§Œ ì•„ë‹ˆë¼ í”Œë˜ê·¸ë¥¼ ì„¤ì •í•´ ì‹œê·¸ë„ ì²˜ë¦¬ ê³¼ì •ì„ ì œì–´

```cpp
int sigcation(int signum, const struct sigaction *act, struct sigaction *oldact);
void psiginfo(const siginfo_t *pinfo, const char *s);
```



### ğŸ¯ sigaction êµ¬ì¡°ì²´
```cpp
struct sigaction {
    int sa_flags;
    void (*sa_handler)(int);    
    void (*sa_sigaction)(int, siginfo_t *, void *);
    sigset_t sa_mask;   // ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ê°€ ìˆ˜í–‰í•˜ëŠ” ë™ì•ˆ ë¸”ë¡œí‚¹ë  ì‹œê·¸ë„
    void (*sa_restorer)(void);
}
```

```c
struct sigaction {
    int sa_flags;
    union {
        void (*sa_handler)();
        void (*sa_sigaction)(int, siginfo_t *, void *);
    } _funcptr;
    sigset_t sa_mask;
}
```
- sa_flagsì— SA_SIGINFOê°€ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ sa_handlerì—ëŠ” ì‹œê·¸ë„ì„ ì²˜ë¦¬í•  ë™ì‘ì„ ì§€ì •
- sa_flagsì— SA_SIGINFOê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ sa_sigaction ë©¤ë²„ë¥¼ ì‚¬ìš©


**[ sa_flags ]**
1. sa_maskì—ëŠ” ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ê°€ ë™ì‘ ì¤‘ì¼ ë•Œ ë¸”ë¡œí‚¹í•  ì‹œê·¸ë„ì„ ì‹œê·¸ë„ ì§‘í•©ìœ¼ë¡œ ì§€ì •í•¨
2. ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ê°€ ì‹œì‘ë  ì‹œ ì´ë¯¸ ë¸”ë¡œí‚¹ëœ ì‹œê·¸ë„ ì§‘í•©ì— sa_maskë¡œ ì§€ì •í•œ ì‹œê·¸ë„ ì§‘í•©ì„ ì¶”ê°€
- SA_NOCLDSTOP : signumì´ SIGCHLDë¼ë©´ ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¤‘ì§€í•˜ê±°ë‚˜ ì¬ì‹œì‘ì‹œ ë¶€ëª¨ í”„ë¡œì„¸ì„œì— ì „ë‹¬ X
- SA_NOCLDWAIT : ì‹œê·¸ë„ì´ SIGCHLDë¼ë©´ ì‹œìŠ¤í…œì€ ìì‹ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ ì‹œ ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ë¡œ ë§Œë“¤ì§€ ì•ŠìŒ
- SA_NODEFER : ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ ì²˜ë¦¬ ë™ì•ˆ í•´ë‹¹ ì‹œê·¸ë„ì€ ì‹œìŠ¤í…œ ì»¤ë„ì— ì˜í•´ ë¸”ë¡œí‚¹ ë˜ì§€ ì•ŠìŒ
- SA_ONSTACK : sigaltstack() í˜¸ì¶œë¡œ ìƒì„±í•œ ëŒ€ì²´ ì‹œê·¸ë„ ìŠ¤íƒì— ìˆëŠ” ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ í˜¸ì¶œ
- SA_RESETHAND : ì‹œê·¸ë„ ê¸°ë³¸ ì²˜ë¦¬ ë°©ë²•ì„ SIG_DFLë¡œ ì¬ì„¤ì •
- SA_RESTART : ì‹œê·¸ë„ ì²˜ë¦¬ì™€ ê´€ë ¨ëœ ì‹œìŠ¤í…œ í˜¸ì¶œì„ ì¬ì‹œì‘
- SA_SIGINFO : 



### ğŸ¯ sigaction() í•¨ìˆ˜ì˜ í™œìš©

**[ ì„¤ëª… ]**
```c
#include <signal.h>
int sigaction(int signum, const struct sigaction *act, struct sigaction *oldact)
```
- signum : ì²˜ë¦¬í•  ì‹œê·¸ë„ (SIGKILL, SIGSTOP ì™¸ ëª¨ë“  ì‹œê·¸ë„ ì‚¬ìš© ê°€ëŠ¥)
- act : ì‹œê·¸ë„ì„ ì²˜ë¦¬í•  ë°©ë²•ì„ ì§€ì •í•œ êµ¬ì¡°ì²´ ì£¼ì†Œ
- oldact : ê¸°ì¡´ì— ì‹œê·¸ë„ì„ ì²˜ë¦¬í•˜ë˜ ë°©ë²•ì„ ì €ì¥í•  êµ¬ì¡°ì²´ ì£¼ì†Œ

**[ sigaction() í•¨ìˆ˜ì˜ íŠ¹ì§• ]**
- ì‹œê·¸ë„ì„ ë°›ì•„ ì´ë¥¼ ì²˜ë¦¬í•  ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ë¥¼ ì§€ì •
- ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ ìˆ˜í–‰ë˜ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì‹œê·¸ë„ ë¸”ë¡œí‚¹ ê°€ëŠ¥

**[ sigaction() í•¨ìˆ˜ ì˜ˆì‹œ ]**
```c
// ex_5.c

#include <unistd.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>

// ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ ì§€ì • (5ì´ˆê°„ ì‹¤í–‰ ëŒ€ê¸°)
void handler(int signo) {
    psignal(signo, "Received Signal:");
    sleep(5);
    printf("In Signal Handler, After Sleep\n");
}

int main(void) {

   struct sigaction act;
 
   sigemptyset(&act.sa_mask);
   sigaddset(&act.sa_mask, SIGQUIT);    // ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ ë™ì‘ ì¤‘ SIGQUIT ì‹œê·¸ë„ì„ ë¸”ë¡œí‚¹í•˜ê¸° ìœ„í•´ sa_maskì— SIGQUIT ì‹œê·¸ë„ì„ ì¶”ê°€

   act.sa_flags = 0;            // sa_flagsì— ì§€ì • í•´ì œ
   act.sa_handler = handler;    

    // SIGINT ì‹œê·¸ë„ì„ ë°›ì„ ê²½ìš°ì˜ ë™ì‘ ì„¤ì •
    if (sigaction(SIGINT, &act, (struct sigaction *)NULL) < 0) {
        perror("sigaction");
        exit(1);
    }
  
   fprintf(stderr, "Input SIGINT: ");
   pause();
   fprintf(stderr, "After Signal Handler\n");
  
   return 0;
}
```

**[ ğŸ¯ SA_RESETHAND í”Œë˜ê·¸ ì˜ˆì‹œ ]**
```c
/* ê¸°ì¡´ ex_5 ì½”ë“œ */
int main(void) {
    /* ì´ì „ ì½”ë“œ ë™ì¼ */
    act.sa_flags = SA_RESTHAND; // SA_RESETHAND í”Œë˜ê·¸ ì„¤ì •ìœ¼ë¡œ ì¸í•´ SIGINT ì‹œê·¸ë„ì˜ ì²˜ë¦¬ ë°©ë²•ì´ ê¸°ë³¸ ì²˜ë¦¬ ë°©ë²•ìœ¼ë¡œ ì¬ì„¤ì •
    act.sa_handler = sig_handler;
    /* ì°¨í›„ ì½”ë“œ ë™ì¼ */
}
```


**[ ì‹œê·¸ë„ ë°œìƒ ì›ì¸ ê²€ìƒ‰ ]**
```c
void handler(int sig, siginfo_t *info, void *ucontext) { /*í•¨ìˆ˜ ì›í˜•*/ }
```
- sig : ì‹œê·¸ë„ í•¸ë“¤ëŸ¬ë¥¼ í˜¸ì¶œí•  ì‹œê·¸ë„
- info : ì‹œê·¸ë„ì´ ë°œìƒí•œ ì›ì¸ì„ ë‹´ì€ siginfo_t rnwhcp vhdlsxj
- ucontext : ì‹œê·¸ë„ì´ ì „ë‹¬ë  ë•Œ ì‹œê·¸ë„ì„ ë°›ëŠ” í”„ë¡œì„¸ìŠ¤ì˜ ë‚´ë¶€ ìƒíƒœë¥¼ ë‚˜íƒ€ë‚´ëŠ” í¬ì¸í„°

**[ siginfo_t êµ¬ì¡°ì²´ ]**
![alt text](image-2.png)

**[ ì‚¬ìš©ì í”„ë¡œì„¸ìŠ¤ì— ì˜í•œ ì‹œê·¸ë„ ë°œìƒ ì›ì¸ ì½”ë“œ ]**
- SI_USER   : 0     : kill(), raise()ë¡œ ì‹œê·¸ë„ì„ ë³´ëƒ„
- SI_KERNEL : 128   : ì»¤ë„ì´ ì‹œê·¸ë„ì„ ë³´ëƒ„ 
- SI_QUEUE  : -1    : sigqueue()ë¡œ ì‹œê·¸ë„ì„ ë³´ëƒ„  
- SI_TIMER  : -2    : timer_settime()ê°€ ìƒì„±í•œ íƒ€ì´ë¨¸ê°€ ë§Œë£Œë˜ì–´ ì‹œê·¸ë„ì„ ë³´ëƒ„
- SI_MESGQ  : -3    : POSIX ë©”ì‹œì§€ íì˜ ìƒíƒœê°€ ë³€í•´ì„œ ì‹œê·¸ë„ì„ ë³´ëƒ„
- SI_ASYNCIO: -4    : ë¹„ë™ê¸° ì…ì¶œë ¥ì´ ì™„ë£Œë˜ì–´ ì‹œê·¸ë„ì„ ë³´ëƒ„
- SI_SIGIO  : -5    : SIGIO ì‹œê·¸ë„ì´ íì— ë“¤ì–´ì™€ì„œ ì‹œê·¸ë„ì„ ë³´ëƒ„




### ğŸ¯ ì‹œê·¸ë„ ë°œìƒ ì›ì¸ ì¶œë ¥ í•¨ìˆ˜ : psiginfo()

**[ ì„¤ëª… ]**
```c
#include <siginfo.h>
void psiginfo(const siginfo_t *pinfo, const char *s);
```
- pinfo : ì‹œê·¸ë„ ë°œìƒ ì›ì¸ì— ê´€í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” êµ¬ì¡°ì²´ í¬ì¸í„°
- s : ì¶œë ¥í•  ë¬¸ìì—´

**[ psiginfo() ì˜ˆì‹œ ]**
```c
// ex_6.c
#include <sys/ucontext.h>
#include <unistd.h>
#include <signal.h>
#include <stdlib.h>
#include <stdio.h>

void sig_handler(int signo, siginfo_t *sf, ucontext_t *uc) {
    psiginfo(sf, "Received Signal:");
    printf("si_code : %d\n", sf->si_code);
    sleep(5);
}

int main() {
    struct sigaction act;

    act.sa_flags = SA_SIGINFO|SA_RESETHAND;
    act.sa_sigaction = (void (*)(int, siginfo_t *, void *))sig_handler;
    sigemptyset(&act.sa_mask);
    if (sigaction(SIGUSR1, &act, (struct sigaction *)NULL) < 0) {
        perror("sigaction");
        perror("sigaction");
        exit(1);
    }
	printf("%d\n", getpid());
    pause();
}
```

**[ì½”ë“œ ì‹¤í–‰ ì˜ˆì‹œ]**
![alt text](image.png)




## 6ï¸âƒ£Â ì•ŒëŒ ì‹œê·¸ë„
- ì¼ì • ì‹œê°„ì´ ì§€ë‚œ í›„ ìë™ìœ¼ë¡œ ì‹œê·¸ë„ì„ ë°œìƒì‹œí‚´

```cpp
unsigned int alarm(unsigned int seconds);
int getitimer(int which, struct itimerval *curr_value);
int setitimer(int which, const struct itimerval *value, struct itimerval *ovalue);
```



### ğŸ¯ ì•ŒëŒ ì‹œê·¸ë„ ìƒì„± : alarm
```c
#include <unistd.h>
unsigned int alarm(unsigned int seconds);
```
- seconds : ì•ŒëŒì„ ë°œìƒì‹œí‚¬ ë•Œê¹Œì§€ ë‚¨ì€ ì‹œê°„(ì´ˆ)

**[ alram() í•¨ìˆ˜ íŠ¹ì§• ]**
- ì¸ìë¡œ ì§€ì •í•œ ì‹œê°„ì´ ì§€ë‚˜ë©´ SIGALRM ì‹œê·¸ë„ì´ ìƒì„±ë˜ì–´ í”„ë¡œì„¸ìŠ¤ì— ì „ë‹¬
- í”„ë¡œì„¸ìŠ¤ë³„ ì•ŒëŒ ì‹œê³„ëŠ” í•˜ë‚˜ë§Œ ìˆìŒìœ¼ë¡œ ì•ŒëŒì€ í•˜ë‚˜ë§Œ ì„¤ì • ê°€ëŠ¥

**[ ì½”ë“œ ì˜ˆì‹œ ]**
```c
//ex_7

#include <unistd.h>
#include <signal.h>
#include <stdio.h>

void sig_handler(int signo) {
    psignal(signo, "Received Signal");
}

int main() {
    signal(SIGALRM, sig_handler);

    alarm(2);
    printf("Wait...\n");
    sleep(3);
}
```



### ğŸ¯ ì¸í„°ë²Œ íƒ€ì´ë¨¸ 

**[ íƒ€ì´ë¨¸ ì¢…ë¥˜ ]**
1. ITMER_REAL 
    - ì‹¤ì œ ì‹œê°„ì„ ì´ìš©
    - ë§Œë£Œì‹œ SIGALRM ì‹œê·¸ë„ ìƒì„±
2. ITIMER_VIRTUAL
    - ì‚¬ìš©ì ëª¨ë“œ CPU ì‹œê°„ ì‚¬ìš©
    - í”„ë¡œì„¸ìŠ¤ ë™ì‘ ì¤‘ì—ë§Œ ì‘ë™, ë§Œë£Œì‹œ SIGVTALRM ì‹œê·¸ë„ ìƒì„± 
3. ITIMER_PROF
    - í”„ë¡œì„¸ìŠ¤ê°€ ì‚¬ìš©í•˜ëŠ” ì‹œìŠ¤í…œ ëª¨ë“œì™€ ì‚¬ìš©ì ëª¨ë“œ CPU ì‹œê°„ì„ í•©í•´ ì‚¬ìš©
    - ë§Œë£Œì‹œ SIGPROF ì‹œê·¸ë„ ìƒì„±
    - ITIMER_VIRTUALì™€ í•¨ê»˜ ì‚¬ìš© ì‹œ ì‚¬ìš©ì ëª¨ë“œ CPU ì‹œê°„ê³¼ ì‹œìŠ¤í…œ ëª¨ë“œ CPU ì‹œê°„ì„ ëª¨ë‘ ì•Œ ìˆ˜ ìˆìŒ




### ğŸ¯ íƒ€ì´ë¨¸ ì •ë³´ ê²€ìƒ‰ : getitimer()

**[ ì½”ë“œ ]**
```c
#include <sys/time.h>
int getitimer(int which, struct itimerval *curr_value);
```
- which : ê²€ìƒ‰í•  íƒ€ì´ë¨¸ ì¢…ë¥˜
- curr_Value : íƒ€ì´ë¨¸ ì •ë³´ë¥¼ ì €ì¥í•  êµ¬ì¡°ì²´ í¬ì¸í„°

**[ ì„¤ëª… ]**
- íƒ€ì´ë¨¸ ì •ë³´ë¥¼ ê²€ìƒ‰í•˜ëŠ” í•¨ìˆ˜
- íƒ€ì´ë¨¸ ì •ë³´ : íƒ€ì´ë¨¸ì˜ í˜„ì¬ ì‹œê°„ê³¼ íƒ€ì´ë¨¸ ê°„ê²© ì •ë³´ë¥¼ ì €ì¥í•  itimerval êµ¬ì¡°ì²´ í¬ì¸í„°

**[ itimerval êµ¬ì¡°ì²´ ]**
```c
struct itimerval {
    struct timeval {
        time_t tv_sec;
        suseconds_t tv_usec;
    }it_interval;
    struct timeval it_value;    // íƒ€ì´ë¨¸ê°€ ë§Œë£Œ ë  ë•Œê¹Œì§€ ë‚¨ì€ ì‹œê°„
}
```



### ğŸ¯ íƒ€ì´ë¨¸ ì„¤ì • : setitimer()
**[ ì½”ë“œ ]**
```c
#include <sys/time.h>
int setitmer(int which, const struct itimerval *value, struct itimerval *ovalue);
```
- which : ì„¤ì •í•  íƒ€ì´ë¨¸ì˜ ì¢…ë¥˜
- value : ì„¤ì •í•  íƒ€ì´ë¨¸ì˜ ì •ë³´ë¥¼ ì €ì¥í•œ êµ¬ì¡°ì²´ í¬ì¸í„°
- ovalue : ì´ì „ íƒ€ì´ë¨¸ì˜ ì •ë³´ë¥¼ ì €ì¥í•  êµ¬ì¡°ì²´ í¬ì¸í„°

**[ ì„¤ëª… ]**
- íƒ€ì´ë¨¸ ì„¤ì •
- ^zë¡œ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰ì„ ì‹œí‚¨ í›„ ì¢…ë£Œ(kill)ë¡œ ì¢…ë£Œ ê°€ëŠ¥

**[ ì˜ˆì‹œ ]**
```c
// ex_8.c

#include <sys/time.h>
#include <unistd.h>
#include <signal.h>
#include <stdlib.h>
#include <stdio.h>

void sig_handler() {
    printf("Timer Invoked..\n");
}

int main() {
    struct itimerval it;

    signal(SIGALRM, sig_handler);
    it.it_value.tv_sec = 3;
    it.it_value.tv_usec = 0;
    it.it_interval.tv_sec = 2;
    it.it_interval.tv_usec = 0;

    if (setitimer(ITIMER_REAL, &it, (struct itimerval *)NULL) == -1) {
        perror("setitimer");
        exit(1);
    }

    while (1) {
        if (getitimer(ITIMER_REAL, &it) == -1) {
            perror("getitimer");
            exit(1);
        }
        printf("%d sec, %d msec.\n", (int)it.it_value.tv_sec, (int)it.it_value.tv_usec);
        sleep(1);
    }
}
```





## 7ï¸âƒ£ ê¸°íƒ€ ì‹œê·¸ë„ ì²˜ë¦¬ í•¨ìˆ˜


### ğŸ¯ ì‹œê·¸ë„ ì •ë³´ ì¶œë ¥ : psignal()
**[ ì½”ë“œ ]**
```c
#include <signal.h>
void psignal(int sig, const char*s)
```
- sig : ì •ë³´ë¥¼ ì¶œë ¥í•  ì‹œê·¸ë„
- s : ì¶œë ¥í•  ë¬¸ìì—´


### ğŸ¯ ì‹œê·¸ì „ ì •ë³´ ì¶œë ¥ : strsignal()
**[ ì½”ë“œ ]**
```c
#include <signal.h>
char* strsignal(int sig)
```
- sig : ì •ë³´ë¥¼ ì¶œë ¥í•  ì‹œê·¸ë„


### ğŸ¯ ì‹œê·¸ë„ ë¸”ë¡œí‚¹ê³¼ í•´ì œ : sighold(), sigrelse()
**[ ì½”ë“œ ]**
```c
#include <signal.h>

int sighold(int sig);
int sigrelse(int sig);
```
- sig : ë¸”ë¡í•˜ê±°ë‚  í•´ì œí•  ì‹œê·¸ë„

**[ ëŒ€ì²´ ê¶Œì¥ ì½”ë“œ ]**
```c
int sigaction(int sig);
```

**[ ëŒ€ì²´ ê¶Œì¥ ì½”ë“œ ]**
```c
//ex_9.c

#include <unistd.h>
#include <signal.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

void sig_handler(int signo) {
    char *s;

    s = strsignal(signo);
    printf("Received Signal : %s\n", s);
}

int main() {
    if (signal(SIGINT, sig_handler) == SIG_ERR) {
        perror("signal");
        exit(1);
    }

    sighold(SIGINT);
    pause();
}
```



### ğŸ¯ ì‹œê·¸ë„ ì§‘í•© ë¸”ë¡œí‚¹ê³¼ í•´ì œ : sigprocmask()
**[ ì½”ë“œ ]**
```c
#include <signal.h>

int sigprocmask(int how, const sigset_t *set, sigset_t *oldset);
```
- how : ì‹œê·¸ë„ì„ ë¸”ë¡œí‚¹í•  ì§€ í•´ì œí•  ì§€ ì—¬ë¶€
    - SIG_BLOCK
    - SIG_UNBLOCK
    - SIG_SETMASK : setì— ì§€ì •í•œ ì‹œê·¸ë„ ì§‘í•©ìœ¼ë¡œ í˜„ ì‹œê·¸ë„ ë§ˆìŠ¤í¬ ëŒ€ì²´
- set : ë¸”ë¡œí‚¹í•˜ê±°ë‚˜ í•´ì œí•  ì‹œê·¸ë„ ì§‘í•©ì˜ ì£¼ì†Œ
- oldset : NULL ë˜ëŠ” ì´ì „ ì„¤ì •ê°’ì„ ì €ì¥í•  ì‹œê·¸ë„ ì§‘í•©ì˜ ì£¼ì†Œ

**[ ì˜ˆì‹œ ]**
```c
#include <unistd.h>
#include <signal.h>
#include <stdio.h>

int main() {
    sigset_t new;

    sigemptyset(&new);
    sigaddset(&new, SIGINT);
    sigaddset(&new, SIGQUIT);
    sigprocmask(SIG_BLOCK, &new, (sigset_t *)NULL);

    printf("Blocking Signals : SIGINT, SIGQUIT\n");
    printf("Send SIGQUIT\n");
    kill(getpid(), SIGQUIT);

    printf("UnBlocking Signals\n");
    sigprocmask(SIG_UNBLOCK, &new, (sigset_t *)NULL);
}
```



### ğŸ¯ ì‹œê·¸ë„ ê¸°ë‹¤ë¦¬ê¸° : pause(), sigsuspend()

**[ ì½”ë“œ ]**
```c
#include <unistd.h>
#include <signal.h>

int pause(void);
int sigsuspend(const sigset_t *mask);   // ì¸ìê°’(ì‹œê·¸ë„ ì§‘í•©)ì— ì„¤ì •ëœ ì‹œê·¸ë„ë“¤ë¡œ í”„ë¡œì„¸ìŠ¤ì˜ ì‹œê·¸ë„ ë§ˆìŠ¤í¬ êµì²´
```
- mask : ê¸°ë‹¤ë¦¬ë ¤ëŠ” ì‹œê·¸ë„ì„ ì§€ì •í•œ ì‹œê·¸ë„ ì§‘í•©ì˜ ì£¼ì†Œ

**[ ì½”ë“œ ]**
```c
// ex_10.c

#include <unistd.h>
#include <signal.h>
#include <stdio.h>

void sig_handler(int signo) {
    psignal(signo, "Received Signal:");
}

int main() {
    sigset_t set;

    signal(SIGALRM, sig_handler);

    sigfillset(&set);
    sigdelset(&set, SIGALRM);

    alarm(5);

    printf("Wait...\n");

    sigsuspend(&set);
}
```

