
# íŒŒì´í”„

## 1ï¸âƒ£ íŒŒì´í”„

### ğŸ¯ íŒŒì´í”„ë€?
- ë‘ í”„ë¡œì„¸ìŠ¤ ì‚¬ì´ì—ì„œ í•œ ë°©í–¥ìœ¼ë¡œ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ê²ƒ
- Shellì—ì„œ `|` ê°€ íŒŒì´í”„ë¥¼ ì˜ë¯¸
```shell
$ cat test.c | more
```
- cat test.cì˜ í‘œì¤€ ì¶œë ¥ì„ ë‹¤ìŒ ëª…ë ¹ì¸ moreì˜ í‘œì¤€ ì…ë ¥ìœ¼ë¡œ ì‚¬ìš©

(18)
- write()ì‹œ íŒŒì´í”„ì— ì¶©ë¶„í•œ ê³µê°„ì´ ìˆìœ¼ë©´ íŒŒì´í”„ ì €ì¥
1. ì“°ê¸° ì „ìš© íŒŒì¼ ê¸°ìˆ ìë¥¼ ë‹«ì€ ê²½ìš° :
2. ì½ê¸° ì €ë‡½ íŒŒì¼ ê¸°ìˆ ìë¥¼ ë‹«ì€ ê²½ìš° : 
    - ìë£Œ ì½ê¸°ë¥¼ ìœ„í•´ í•´ë‹¹ íŒŒì´í”„ë¥¼ ê°œë°©í–” íƒ€ í”„ë¡œì„¸ìŠ¤ ì¡´ì¬ : Ok
    - SIGPIPE ì‹œê·¸ë„ (ì˜¤ë¥˜)



### ğŸ¯ ì´ë¦„ ì—†ëŠ” íŒŒì´í”„ : pipe
```c
FILE *popen(const char *command, const char *type); // ê³ ìˆ˜ì¤€ ì‹œìŠ¤í…œì½œ
int pclose(FILE *stream);   // ì €ìˆ˜ì¤€ ì‹œìŠ¤í…œ ì½œ

int pipe(int pipefd[2]);
```
- ë¶€ëª¨-ìì‹ í”„ë¡œì„¸ìŠ¤ê°„ í†µì‹ 
- ë‹¨ ë°©í–¥ í†µì‹  : 'ë¶€ëª¨->ìì‹' ë˜ëŠ” 'ìì‹->ë¶€ëª¨' í•œ ë°©í–¥ìœ¼ë¡œë§Œ í†µì‹ 



### ğŸ¯ ì´ë¦„ ìˆëŠ” íŒŒì´í”„ : FIFO
```c
int mknod(const char *pathname, mode_t mode, dev_t dev);
int mkfifo(const char *pathname, mode_t mode);
```
- ë¶€ëª¨-ìì‹ í”„ë¡œì„¸ìŠ¤ ê´€ê³„ê°€ ì•„ë‹Œ ë…ë¦½ì ì¸ í”„ë¡œì„¸ìŠ¤ë“¤ì˜ íŒŒì´í”„ ì‚¬ìš© ê°€ëŠ¥






## 2ï¸âƒ£ ì´ë¦„ ì—†ëŠ” íŒŒì´í”„

### ğŸ¯ íŒŒì´í”„ ë§Œë“¤ê¸° : popen()

**[ ì½”ë“œ ]**
```c
FILE *popen(const char *command, const char *type);
```
- command : ì…¸ ëª…ë ¹
- type : "r", "w"

**[ íŠ¹ì§• ]**
- ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì™€ í†µì‹ í•˜ê¸° ìœ„í•œ íŒŒì´í”„ ì„¤ì •
- ë‚´ë¶€ì ìœ¼ë¡œ fork()ë¥¼ ì‹¤í–‰í•˜ì—¬ ìì‹ í”„ë¡œì„¸ìŠ¤ í˜•ì„± -> ìì‹ í”„ë¡œì„¸ìŠ¤ commandì— exec() ì‹¤í–‰

**[ ì˜ˆì œ ]**
```c
// ex_2.c

#include <stdlib.h>
#include <stdio.h>

int main( ) {
    FILE *fp;
    char buf[256];

    fp = popen("date", "r");
    if (fp == NULL) {
       fprintf(stderr, "popen failed\n");
       exit(1);
    }

    if (fgets(buf, sizeof(buf), fp) == NULL) {
        fprintf(stderr, "No data from pipe!\n");
        exit(1);
    }

    printf("line : %s\n", buf);
    pclose(fp);
}

// ì‹¤í–‰ ê²°ê³¼ : 
// line : 2025. 10. 29. (ìˆ˜) 21:23:19 KST
```



### ğŸ¯ íŒŒì´í”„ ë‹«ê¸° : pclose()

**[ ì½”ë“œ ]**
```c
int pclose(FILE *stream);
```

**[ íŠ¹ì§• ]**
- íŒŒì¼ ì…ì¶œë ¥ í•¨ìˆ˜ì²˜ëŸ¼ ì¸ìë¡œ ì§€ì •í•œ íŒŒì´í”„ë¥¼ ë‹«ìŒ
- ê´€ë ¨ëœ waitpid() ìˆ˜í–‰ -> ìì‹ í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì¢…ë£Œí•˜ê¸¸ ê¸°ë‹¤ë ¸ë‹¤ê°€ ë¦¬í„´

**[ ì˜ˆì œ ]**
```c
// ex_1.c

#include <stdlib.h>
#include <stdio.h>

int main( ) {
    FILE *fp;
    int a;

    fp = popen("wc -l", "w");
    if (fp == NULL) {
        fprintf(stderr, "popen failed\n");
        exit(1);
    }

    for (a = 0; a < 100; a++)
        fprintf(fp, "test line\n");

    pclose(fp);
}

// ì‹¤í–‰ ê²°ê³¼ : 100
```



### ğŸ¯ íŒŒì´í”„ ë§Œë“¤ê¸° : pipe()

**[ ì„¤ëª… ]**
```c
int pipe(int pipefid[2]);
```
- pipefd[2] : íŒŒì´í”„ë¡œ ì‚¬ìš©í•  íŒŒì¼ ê¸°ìˆ ì (2ê°œ)
    - pipefd[0] : ì½ê¸° ì „ìš©
    - pipefd[1] : ì“°ê¸° ì „ìš©

**[ íŠ¹ì§• ]**
- íŒŒì¼ê¸°ìˆ ì 2ê°œë¥¼ ë°›ì•„ ì €ì¥

**[ pipe í†µì‹  ê³¼ì • ]**
1. pipe()ë¥¼ í˜¸ì¶œí•´ íŒŒì´í”„ì— ì‚¬ìš©í•  íŒŒì¼ ê¸°ìˆ ìë¥¼ ì–»ìŒ
![alt text](image.png)

    ```c
    //ex_3.c

    #include <unistd.h>
    #include <stdio.h>
    #include <stdlib.h>

    #define MSGSIZE		16

    char *msg1 = "hello, world #1";
    char *msg2 = "hello, world #2";
    char *msg3 = "hello, world #3";

    main() {

        char inbuf[MSGSIZE];
        int p[2], j;

        if (pipe(p) == -1) { perror("pipe call"); exit(1); }

        write(p[1], msg1, MSGSIZE);
        write(p[1], msg2, MSGSIZE);
        write(p[1], msg3, MSGSIZE);

        for (j=0; j<3; j++) { 
            read(p[0], inbuf, MSGSIZE);
            printf("%s\n", inbuf);
        }

        exit(0);
    }
    ```
    - ìœ„ ì½”ë“œì—ì„œëŠ” p[1]ì˜ writeë¥¼ íŒŒì´í”„ë¥¼ í†µí•´ p[0]ê°€ ì½ê³  ì°¨í›„ p[0]ì—ì„œ ë¬¸ìì—´ì„ ì¶œë ¥

2. fork() í•¨ìˆ˜ë¥¼ ìˆ˜í–‰í•´ ì§€ì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„± 
![alt text](image-1.png)

    ```c
    #include <unistd.h>
    #include <stdio.h>
    #include <stdlib.h>

    #define MSGSIZE		16

    char *msg1 = "hello, world #1";
    char *msg2 = "hello, world #2";
    char *msg3 = "hello, world #3";

    main() {

        char inbuf[MSGSIZE];
        int p[2], j;
        pid_t pid;

        if (pipe(p) == -1) { perror("pipe call"); exit(1); }

        switch (pid = fork()) {
        case -1:
            perror("fork call");
            exit(2);
        case 0:
            write(p[1], msg1, MSGSIZE);
            write(p[1], msg2, MSGSIZE);
            write(p[1], msg3, MSGSIZE);
            break;
        default:
            for (j=0; j<3; j++) {
                read(p[0], inbuf, MSGSIZE);
                printf("%s\n", inbuf);
            }
            wait(NULL);
        }

        exit(0);
    }
    ```
    - ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ ë‚´ p[0], p[1] ë³´ìœ 
    - ìì‹ í”„ë¡œì„¸ìŠ¤ ë‚´ p[0], p[1] ë³´ìœ 
    - íŒŒì´í”„ë¥¼ í†µí•´ ë¶€ëª¨ p[1]->ìì‹ p[0], ìì‹ p[1]->ë¶€ëª¨ p[0]

3. íŒŒì´í”„ëŠ” ë‹¨ë°©í–¥ í†µì‹ ì´ë¯€ë¡œ ë°©í–¥ì„ ê²°ì •


**[ pipe() ì˜ˆì‹œ ì½”ë“œë“¤ ]**
- pipe() í•¨ìˆ˜ë¡œ ëª…ë ¹ ì‹¤í–‰í•˜ê¸°
```c
#include <sys/wait.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

int main( ) {
    int fd[2];
    pid_t pid;
    char buf[257];
    int len, status;

    if (pipe(fd) == -1) {
        perror("pipe");
        exit(1);
    }

    switch (pid = fork( )) {
    case -1 :
        perror("fork");
        exit(1);
        break;
    case 0 : /* child */
        close(fd[1]);
        write(1, "Child Process:", 15);
        len = read(fd[0], buf, 256);
        write(1, buf, len);
        close(fd[0]);
        break;
    default :
        close(fd[0]);
        write(fd[1], "Test Message\n", 14);
        close(fd[1]);
        waitpid(pid, &status, 0);
        break;
    }
}
```

- pipe() í•¨ìˆ˜ë¡œ ëª…ë ¹ ì‹¤í–‰í•˜ê¸°
```c
// ex_6.c

#include <sys/wait.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

int main(void) {
    int fd[2];
    pid_t pid;

    if (pipe(fd) == -1) {
        perror("pipe");
        exit(1);
    }

    switch (pid = fork()) {
        case -1 :
            perror("fork");
            exit(1);
            break;
        case 0 : /* child */
            close(fd[1]);
            if (fd[0] != 0) {
                dup2(fd[0], 0);
                close(fd[0]);
            }
            execlp("grep", "grep", "ssh", (char *)NULL);
            exit(1);
            break;
        default :
            close(fd[0]);
            if (fd[1] != 1) {
                dup2(fd[1], 1);
                close(fd[1]);
            }
            execlp("ps", "ps", "-ef", (char *)NULL);
            wait(NULL);
            break;
    }

    return 0;
}
```

- ì–‘ë°©í–¥ í†µì‹ í•˜ê¸°
```c
#include <sys/wait.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main( ) {
    int fd1[2], fd2[2];
    pid_t pid;
    char buf[257];
    int len, status;

    if (pipe(fd1) == -1) {
        perror("pipe");
        exit(1);
    }

    if (pipe(fd2) == -1) {
        perror("pipe");
        exit(1);
    }

    switch (pid = fork( )) {
        case -1 :
            perror("fork");
            exit(1);
            break;
        case 0 : /* child */
            close(fd1[1]);
            close(fd2[0]);
            len = read(fd1[0], buf, 256);
            write(1, "Child Process:", 15);
            write(1, buf, len);

            strcpy(buf, "Good\n");
            write(fd2[1], buf, strlen(buf));
            break;
        default :
            close(fd1[0]);
            close(fd2[1]);
            write(fd1[1], "Hello\n", 6);

            len = read(fd2[0], buf, 256);
            write(1, "Parent Process:", 15);
            write(1, buf, len);
            waitpid(pid, &status, 0);
            break;
    }
}

/*
ì‹¤í–‰ ê²°ê³¼ : 
Child Process:Hello
Parent Process:Good
*/
```



### ğŸ¯ ë¹„ë´‰ì‡„ I/O
**[ ë´‰ì‡„ I/Oì™€ ë¹„ë´‰ì‡„ I/O ì „í™˜ ]**
- ê¸°ë³¸ì ìœ¼ë¡œ íŒŒì´í”„ë¥¼ í¬í•¨í•œ ëª¨ë“  íŒŒì¼ ì…ì¶œë ¥ì€ *ë´‰ì‡„* ëª¨ë“œë¡œ ë™ì‘
- fcntl() ì‚¬ìš© ì‹œ *ë¹„ë´‰ì‡„*ëª¨ë“œë¡œ ì „í™˜ ê°€ëŠ¥

**[ ë´‰ì‡„ I/O ]**
- read() : read() í˜¸ì¶œ ì‹œ í”„ë¡œê·¸ë¨ì€ ë°ì´í„°ê°€ ë“¤ì–´ì˜¬ ë•Œê¹Œì§€ ë¬´í•œíˆ ëŒ€ê¸°
- write() : write() í˜¸ì¶œ ì‹œ íŒŒì´í”„ì— ë¹ˆìë¦¬ê°€ ìƒê¸¸ ë•Œê¹Œì§€ ë¬´í•œíˆ ëŒ€ê¸°

**[ ë¹„ë´‰ì‡„ I/O ]**
1. read() :
    - íŒŒì´í”„ê°€ ë¹„ì—ˆì„ ë•Œ í˜¸ì¶œ ì‹œ ì¦‰ì‹œ -1 ë°˜í™˜
    - -1 ë°˜í™˜ ì‚¬ìœ ëŠ” errnoë¼ëŠ” ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
    - errno ê°’ì´ EAGAIN(ë˜ëŠ” EWOULDBLOCK)ì´ë©´ ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•˜ë¼ëŠ” ëœ»
2. write() :
    - íŒŒì´í”„ê°€ ê½‰ ì°¨ìˆì„ ë•Œ write() í˜¸ì¶œ ì‹œ, ê¸°ë‹¤ë¦¬ì§€ ì•Šê³  ì¦‰ì‹œ -1 ë°˜í™˜
    - errnoë¥¼ EAGAINìœ¼ë¡œ ì„¤ì •

**[ ì½”ë“œ ]**
```c
if (fcntl(filedes, F_SETFL, O_NONBLOCK) == -1) {}
```
- filedsì˜ ì†ì„±ì„ ë¹„ë´‰ì‡„(O_NONBLOCK)ìœ¼ë¡œ ì„¤ì •(F_SETFL)í•˜ë¼ëŠ” ëœ»

**[ ì˜ˆì‹œ ]**
```c
#include <fcntl.h>
#include <errno.h>
#include <stdio.h>
#include <stdlib.h>

#define MSGSIZE 6

int parent(int *);
int child (int *);

char *msg1 = "hello";
char *msg2 = "bye!!";

int main() {

    // pipe() : íŒŒì´í”„ ìƒì„± (pfd[0]=ì½ê¸°, pfd[1]=ì“°ê¸°)
    int pfd[2];
    if (pipe(pfd) == -1) perror ("pipe call");

    // [ í•µì‹¬!!! ] : ë¶€ëª¨ê°€ ì‚¬ìš©í•  ì½ê¸°ìš© íŒŒì´í”„ë¥¼ ë¹„ë´‰ì‡„ ëª¨ë“œë¡œ ì„¤ì •
    if (fcntl(pfd[0], F_SETFL, O_NONBLOCK) == -1) perror ("fcntl call");

    switch (fork()) {
        case -1 : perror("fork call");
        case 0  : child(pfd);
        default : parent(pfd);
    }
}

int parent(int p[2]) {

    int nread;
    char buf[MSGSIZE];

    // ì“°ê¸°ìš© íŒŒì´í”„ ë‹«ê¸°
    close (p[1]);

    for (;;) {
        // ë¹„ë´‰ì‡„ ëª¨ë“œë¡œ íŒŒì´í”„ì—ì„œ ë°ì´í„° ì½ê¸°ë¥¼ ì‹œë„
        switch (nread = read(p[0], buf, MSGSIZE)) {
            case -1:
                if (errno == EAGAIN) {
                    printf("(pipe empty)\n");
                    sleep(1);
                    break;
                }
            case 0:
                printf("End of conversation\n");
                exit(0);
            default:
                printf("MSG = %s\n", buf);
        }   
    }
}

int child(int p[2]) {

    int count;
    close(p[0]);    // ì½ê¸°ìš© íŒŒì´í”„ ë´‰ì‡„

    for (count = 0; count < 3; count++) {
        // íŒŒì´í”„ì— ""hello" ì‘ì„± x 3
        write(p[1], msg1, MSGSIZE);     
        sleep(3);
    }

    // íŒŒì´í”„ì— ""bye" ì‘ì„±
    write(p[1], msg2, MSGSIZE);
    exit(0);
}
```


select
### ğŸ¯ I/O ë‹¤ì¤‘í™” : select
- ë¹„ë´‰ì‡„ IOì˜ ê²½ìš°ëŠ” ë¶€ëª¨ê°€ íŒŒì´í”„ë¥¼ í•˜ë‚˜ë§Œ ê°ì‹œí•¨
- ì„œë²„(ë¶€ëª¨)ê°€ ë³µìˆ˜ì˜ í´ë¼ì´ì–¸íŠ¸(ìì‹ë“¤)ì™€ ë™ì‹œì— í†µì‹ í•˜ëŠ” ë²•

**[ select ]**
```c
int select (int nfds,       // ì„œë²„ê°€ í¥ë¯¸ë¥¼ ê°€ì§€ëŠ” íŒŒì¼ ê¸°ìˆ ì ìˆ˜
            fd_set *readfs, 
            fd_set *writefs,
            fd_set *errorfs, 
            struct timeval{
                long tv_sec; 
                long tv_usec;
            } *timeout)
```
- ë³µìˆ˜ì˜ íŒŒì¼ ê¸°ìˆ ìë¥¼ ë™ì‹œì— ê°ì‹œí•˜ë‹¤ê°€, í•˜ë‚˜ë¼ë„ ì¤€ë¹„ë˜ë©´ ì•Œë ¤ì£¼ëŠ” ì‹œìŠ¤í…œ í˜¸ì¶œ

**[ fd_setì´ ê°€ë¥´í‚¤ëŠ” ë§ˆìŠ¤í¬ ì„¤ì •í•˜ê¸° ]**
```c
void FD_ZERO(fd_set *fdset);
void FD_SET(int fd, fd_set *fdset);
int FD_ISSET(int fd, fd_set *fdset);
void FD_CLR(int fd, fd_Set *fdset);
```

- fd_set ì„¤ì • ì˜ˆì‹œ
```c
int fd1, fd2;
fd_set readset;

fd1 = open("file1", O_RDONLY);
fd2 = open("file2", O_RDONLY);
FD_ZERO(&readset);
FD_SET(fd1, &readset);
FD_SET(fd2, &readset);
switch(select(5, &readset, NULL, NULL, NULL)) {}
```

**[ ì½”ë“œ ì˜ˆì‹œ ]**
```c
// ex_9.c
#include <sys/time.h>
#include <sys/wait.h>
#include <stdio.h>
#include <stdlib.h>

#define MSGSIZE 6

char *msg1 = "hello";
char *msg2 = "bye!!";

void parent(int p[3][2]);
int child(int[]);

int main() {

    int pip[3][2];
    int i;

    // 3ê°œì˜ child ìƒì„±
    for (i=0; i<3; i++) {
        if (pipe(pip[i]) == -1) perror("pipe call");

        switch(fork()) {
            case -1: perror("fork call");
            case 0 : child(pip[i]); // ê° childëŠ” pipe ìƒì„±
        }
    }

    parent(pip);

    exit(0);
}


void parent(int p[3][2]) {
    char buf[MSGSIZE], ch;
    fd_set set, master;
    int i;

    for (i=0; i<3; i++) close(p[i][1]);

    FD_ZERO(&master);
    FD_SET(0, &master);

    for (i=0; i<3; i++) FD_SET(p[i][0], &master);

    while (set = master, select(p[2][0]+1, &set, NULL, NULL, NULL) > 0) {

        if (FD_ISSET(0, &set)) {
            printf("From standard input ...");
            read(0, &ch, 1);
            printf("%c\n", ch);
        }

        for (i=0; i<3; i++) {
            if (FD_ISSET(p[i][0], &set)) {

                if (read(p[i][0], buf, MSGSIZE) > 0) {
                    printf("Message from child %d\n", i);
                    printf("MSG=%s\n", buf);
                }
            }
        }

        if (waitpid (-1, NULL, WNOHANG) == -1) return;
    }
}
int child(int p[2]) {
    int count;

    close (p[0]);

    for (count = 0; count < 2; count ++) {
        write(p[1], msg1, MSGSIZE);
        sleep(getpid() % 4);
    }

    write(p[1], msg2, MSGSIZE);
    exit(0);
}
```



## 3ï¸âƒ£ ì´ë¦„ ìˆëŠ” íŒŒì´í”„ : FIFO


### ğŸ¯ FIFO íŠ¹ìˆ˜ íŒŒì¼ ìƒì„± : mknod()
**[ mknod ]**
```
int mknod(const char *pathname, mode_t mode, dev_t dev);
```
- pathname : íŠ¹ìˆ˜ íŒŒì¼ì„ ìƒì„±í•  ê²½ë¡œ
- mode : íŠ¹ìˆ˜ íŒŒì¼ì˜ ì¢…ë¥˜ì™€ ì ‘ê·¼ ê¶Œí•œ ì§€ì •
    - S_IFIFO : FIFO íŠ¹ìˆ˜ íŒŒì¼
    - S_IFBLK : ë¸”ë¡ ì¥ì¹˜ íŠ¹ìˆ˜ íŒŒì¼
    - S_IFSOCK : ìœ ë‹‰ìŠ¤ ë„ë©”ì¸ ì†Œì¼“ íŒŒì¼
    - S_IFCHR : ë¬¸ì ì¥ì¹˜ íŠ¹ìˆ˜ íŒŒì¼
    - S_IFREG : ì¼ë°˜ íŒŒì¼
- dev : ë¸”ë¡/ë¬¸ì ì¥ì¹˜ ì„¤ì •ê°’

**[ ì½”ë“œ ì˜ˆì‹œ ]**
```c
// ex_10.c
#include <sys/types.h>
#include <sys/stat.h>
#include <stdlib.h>
#include <stdio.h>

int main( ) {
    if (mknod("TEST_FIFO1", S_IFIFO | 0644, 0) == -1) {
        perror("mknod");
        exit(1);
    }

    if (mkfifo("TEST_FIFO2", 0644) == -1) {
        perror("mkfifo");
        exit(1);
    }
}

// ls -al TEST* ì„ ì‹¤í–‰í•´ë³´ì
// rm TEST*
```



### ğŸ¯ FIFO íŠ¹ìˆ˜ íŒŒì¼ ìƒì„± : mkfifo()
**[ mkfifo ]**
```c
#include <sys/types.h>
#include <sys/stat.h>

int mkfifo(const char *pathname, mode_t mode);
```
- pathname : FIFO íŒŒì¼ì„ ìƒì„±í•  ê²½ë¡œ
- mode : ì ‘ê·¼ ê¶Œí•œ ì§€ì •

**[ íŠ¹ì§• ]**
- pathnameìœ¼ë¡œ ì§€ì •í•œ ê²½ë¡œì— ì ‘ê·¼ ê¶Œí•œì„ ì§€ì •í•´ FIFO íŒŒì¼ ìƒì„±


### ğŸ¯ ì„œë²„ í”„ë¡œê·¸ë˜ë° ì˜ˆì œ
**[ ì„œë²„ í”„ë¡œê·¸ë¨ ]**
```c
// server.c

#include <sys/stat.h>
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

int main() {
    int pd, n;
    char message[] = "Hello, Client!\n";

    printf("Server ==========\n");

    if(mkfifo("./My_Fifo", 0666) == -1) {
        perror("mkfifo");
        exit(1);
    }

    if((pd = open("./My_Fifo", O_WRONLY)) == -1) {
        perror("mkfifo");
        exit(1);
    }

    printf("To Client : ");
    printf("%s\n", message);

    if((n = write(pd, message, strlen(message))) == -1) {
        perror("write");
        exit(1);
    }

    close(pd);
}

/* 
ë°±ê·¸ë¼ìš´ë“œë¡œ ëŒë¦¬ê³  ì‹¶ì€ ê²½ìš°
./server&
./client
ps
*/
```

```c
// client.c
#include <fcntl.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

int main() {
    int pd, n;
    char message[BUFSIZ];

    if((pd = open("./My_Fifo", O_RDONLY)) == -1) {
        perror("open");
        exit(1);
    }

    printf("Client ==========\n");
    write(1, "From Server : ", 13);

    while((n = read(pd, message, 1)) > 0) {
        write(1, message, n);
    }
    if(n == -1) {
        perror("read");
        exit(1);
    }

    write(1,"\n",1);
    close(pd);
}

/*
 ì„¸ì…˜ì„ 2ê°œë¡œ ì—¬ë¡ ì‹¶ì€ ê²½ìš°
1ë²ˆ í„°ë¯¸ë„ ./server
2ë²ˆ í„°ë¯¸ë„ ./client
*/
```