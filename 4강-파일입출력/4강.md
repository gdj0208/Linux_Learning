
## 1ï¸âƒ£ ë§í¬ vs ì‹¬ë²Œë¦­ ë§í¬
### ğŸ¯ í•˜ë“œ ë§í¬
- íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” íŒŒì¼ëª…ì„ ìƒì„±
- inode ì‚¬ìš©
- í•˜ë“œ ë§í¬ ìƒì„±ì‹œ inodeì— ì €ì¥ëœ ë§í¬ ìˆ˜ ì¦ê°€

### ğŸ¯ ì‹¬ë²Œë¦­ ë§í¬
- ê¸°ì¡´ íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” íŒŒì¼
- ê¸°ì¡´ íŒŒì¼ê³¼ ë‹¤ë¥¸ inode tkdyd
- ê¸°ì¡´ íŒŒì¼ì˜ ê²½ë¡œë¥¼ ì €ì¥

## 2ï¸âƒ£ ë§í¬ ê´€ë ¨ ëª…ë ¹ì–´

### ğŸ¯ í•˜ë“œ ë§í¬ ìƒì„± : link()
#### **1. ì½”ë“œ**
```
# include <unistd.h>

int link(const char *oldpath ,const char *newpath);
```
- í•˜ë“œ ë§í¬ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©
- êµ¬ ê²½ë¡œ, ì‹  ê²½ë¡œ ë‘˜ ë‹¤ ê°™ì€ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ ì§€ì •í•´ì•¼ í•¨

#### **2. ì½”ë“œ ì˜ˆì‹œ**
```
// ex_1.c

#include <sys/types.h>
#include <sys/stat.h>
#include <sys/errno.h>
#include <unistd.h>
#include <stdio.h>

extern int errno;

main() {
        struct stat buf;

        stat("test.txt", &buf);
        printf("Before Link Count = %d\n", (int)buf.st_nlink);

        link("test.txt", "test.ln");

        stat("test.txt", &buf);
        printf("After Link Count = %d\n", (int)buf.st_nlink);
}
```

### ğŸ¯ ì‹¬ë²Œë¦­ ë§í¬ ìƒì„± : symlink()
#### **1. ì½”ë“œ**
```
# include <unistd.h>

int symlink(const char *target, const char *linkpath);
```
- target : ê¸°ì¡´ íŒŒì¼ ê²½ë¡œ
- linkpath : ìƒˆë¡œ ìƒì„±í•  ì‹¬ë²Œë¦­ ë§í¬ ê²½ë¡œ

- ì‹¬ë²Œë¦­ ë§í¬ëŠ” ê¸°ì¡´ íŒŒì¼ê³¼ ë‹¤ë¥¸ íŒŒì¼ ì‹œìŠ¤í…œì—ë„ ìƒì„± ê°€ëŠ¥

#### **2. ì½”ë“œ ì˜ˆì‹œ**
```
// ex_2.c

#include <sys/types.h>
#include <sys/stat.h>
#include <sys/errno.h>
#include <unistd.h>
#include <stdio.h>

main() {
        symlink("test.txt", "test.sym");
}
```

### ğŸ¯ ì‹¬ë²Œë¦­ ë§í¬ì˜ ì •ë³´ ê²€ìƒ‰ : lstat()

#### **1. ì½”ë“œ**
```
# include <sys/types.h>
# include <sys/stat.h>
# include <unistd.h>

int lstat(const char *pathname, struct stat *statbuf);
```
- pathname : ì‹¬ë²Œë¦­ ë§í¬ ê²½ë¡œ
- statbuf : ìƒˆë¡œ ìƒì„±í•  ë§í¬ì˜ ê²½ë¡œ

- ì‹¬ë²Œë¦­ ë§í¬ë¥¼ stat()ë¡œ ê²€ìƒ‰ì‹œ ì›ë³¸ íŒŒì¼ì— ëŒ€í•œ ì •ë³´ê°€ ê²€ìƒ‰ëœë‹¤ëŠ” ì ì— ì£¼ì˜í•  ê²ƒ

#### **2. ì½”ë“œ ì˜ˆì‹œ**
```
// ex_3.c

#include <sys/types.h>
#include <sys/stat.h>
#include <sys/errno.h>
#include <unistd.h>
#include <stdio.h>

main() {

        struct stat buf;

        printf("1. stat : test.txt ---\n");
        stat("test.txt", &buf);
        printf("test.txt : Link Count = %d\n", (int)buf.st_nlink);
        printf("test.txt : Inode = %d\n", (int)buf.st_ino);

        printf("2. stat : test.sym ---\n");
        stat("test.sym", &buf);
        printf("test.sym : Link Count = %d\n", (int)buf.st_nlink);
        printf("test.sym : Inode = %d\n", (int)buf.st_ino);

        printf("3. lstat : test.sym ---\n");
        lstat("test.sym", &buf);
        printf("test.sym : Link Count = %d\n", (int)buf.st_nlink);
        printf("test.sym : Inode = %d\n", (int)buf.st_ino);

}
```


### ğŸ¯ ì‹¬ë²Œë¦­ ë§í¬ì˜ ë‚´ìš© ì½ê¸° : readlink()

#### **1. ì½”ë“œ**
```
# include <unistd.h>

ssize_t readlink(const char *pathname, char *buf, size_t bufsiz);
```
- pathname : ì‹¬ë²Œë¦­ ë§í¬ ê²½ë¡œ
- buf : ì½ì–´ì˜¨ ë‚´ìš©ì„ ì €ì¥í•  ë²„í¼
- bufsiz : ë²„í¼ í¬ê¸°

#### **2. ì½”ë“œ ì˜ˆì‹œ**
```
// ex_4.c

#include <sys/types.h>
#include <sys/stat.h>
#include <sys/errno.h>
#include <unistd.h>
#include <stdio.h>
#include <fcntl.h>
#include <stdlib.h>

main() {

        char buf1[BUFSIZ], buf2[BUFSIZ];
        int n;

        n = readlink("test.sym", buf1, BUFSIZ);
        if (n == -1) {
                perror("readlink");
                exit(1);
        }

        buf1[n] = '\0';
        printf("test.sym : READLINK = %s\n", buf1);

        realpath("test.sym", buf2);
	printf("test.sym : REALPATH = %s\n", buf2);

}
```


### ğŸ¯ ì‹¬ë²Œë¦­ ë§í¬ ì›ë³¸ íŒŒì¼ì˜ ê²½ë¡œ ì½ê¸° : realpath()

#### **1. ì½”ë“œ**
```
# include <limits.h>
# include <stdlib.h>

char *realpath(const char *path, char *resolved_path);
```
- path : ì‹¬ë²Œë¦­ ë§í¬ì˜ ê²½ë¡œëª…
- resolved_path : ê²½ë¡œëª…ì„ ì €ì¥í•  ë²„í¼ ì£¼ì†Œ

#### **2. ì½”ë“œ ì˜ˆì‹œ**
```
// ex_5.c

# include <sys/stat.h>
# include <stdlib.h>
# include <stdio.h>

int main() {
    char buf[BUFSIZ];

    realpath("linux.sym", buf);
    printf("Real path : %s", buf);
}
```


### ğŸ¯ ë§í¬ ëŠê¸° : unlink()

#### **1. ì½”ë“œ**
```
# include <unistd.h>

int unlink(const char *pathname);
```
- pathname : ì‚­ì œí•  ë§í¬ì˜ ê²½ë¡œ

#### **2. ì½”ë“œ ì˜ˆì‹œ**
```
// ex_6.c

#include <sys/stat.h>
#include <unistd.h>
#include <stdio.h>

int main() {
    struct stat statbuf;

    stat("linux.ln", &statbuf);
    printf("1.linux.ln : Link Count = %d\n", (int)statbuf.st_nlink);

    unlink("linux.ln");

    stat("linux.txt", &statbuf);
    printf("2.linux.txt: Link Count = %d\n", (int)statbuf.st_nlink);

    unlink("linux.sym");
}
```

---

# ğŸ“ íŒŒì¼ ì…ì¶œë ¥
### 0ï¸âƒ£ ì €ìˆ˜ì¤€ ì…ì¶œë ¥ê³¼ ê³ ìˆ˜ì¤€ ì…ì¶œë ¥ì˜ ë¹„êµ
|  | ì €ìˆ˜ì¤€ ì…ì¶œë ¥ | ê³ ìˆ˜ì¤€ ì…ì¶œë ¥ |
| :---: | :---: | :---: |
| íŒŒì¼ ì§€ì‹œì | int fd | FILE *fp |
| íŠ¹ì§• | - í›¨ì”¬ ë¹ ë¦„ <br> - ë°”ì´íŠ¸ íƒ„ìœ„ ì½/ì“°ê¸° <br> - íŠ¹ìˆ˜ íŒŒì¼ ì ‘ê·¼ ê°€ëŠ¥ | - í›¨ì”¬ ì‰¬ì›€ <br> - ë²„í¼ ë‹¨ìœ„ ì½/ì“°ê¸° <br> - ì—¬ëŸ¬ í˜•ì‹ ì§€ì› |
| ì£¼ìš” í•¨ìˆ˜| open(), close(), read() ë“± | fopen(), fclose(), fread() ë“± |

## 1ï¸âƒ£ ê³ ìˆ˜ì¤€ íŒŒì¼ ì…ì¶œë ¥
- ì €ìˆ˜ì¤€ íŒŒì¼ ì…ì¶œë ¥ì˜ ë¶ˆí¸í•¨ í•´ì„œ
- C ì–¸ì–´ í‘œì¤€í•¨ìˆ˜ ì œê³µ 
- ë²„í¼ë¥¼ ì´ìš©í•œ í•œ ë²ˆì— ì½ê¸° & ì“°ê¸° ê°€ëŠ¥
- ìë£Œí˜•ì— ë”°ë¼ í¸ë¦¬í•˜ê²Œ ì‹œìš©
- ì—´ë¦° íŒŒì¼ ì°¸ì¡°

(ì‹¤í–‰ ì½”ë“œëŠ” ì‹œí—˜ì— ë³„ë¡œ ë‚˜ì˜¤ì§€ ì•Šì„ ê²ƒ)

## 2ï¸âƒ£ ì €ìˆ˜ì¤€ íŒŒì¼ ì…ì¶œë ¥
- ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì˜ ì‹œìŠ¤í…œ í˜¸ì¶œì„ ì´ìš©í•˜ì—¬ íŒŒì¼ ì…ì¶œë ¥ì„ ì‹¤í–‰
- ì‹œìŠ¤í…œ í˜¸ì¶œì„ ì´ìš©í•˜ì—¬ íŒŒì¼ì— ì¢€ ë” ë¹ ë¥´ê²Œ ì ‘ê·¼
- ë°”ì´íŠ¸ ë‹¨ìœ„ë¡œ íŒŒì¼ì„ ë‹¤ë£¸ 
    - íŠ¹ìˆ˜ íŒŒì¼ ì½ê³  ì“°ê¸° ê°€ëŠ¥
- ì‘ìš©í”„ë¡œê·¸ë¨ ì‘ì„± ì‹œ ë‹¤ë¥¸ ì¶”ê°€ê¸°ëŠ¥ì„ í•¨ìˆ˜ë¡œ ì¶”ê°€ êµ¬í˜„ í•„ìš”
- ì—´ë¦° íŒŒì¼ ì°¸ì¡°ì‹œ íŒŒì¼ ê¸°ìˆ ì ì‚¬ìš©

<br>

### ğŸ¯ open()
#### **1. ì½”ë“œ**
```
# include <sys/stat.h>
# include <sys/types.h>
# include <fcntl.h>

int open(const char *pathname, int flags, mode_t mode);
```
- pathnameì— ì§€ì •í•œ íŒŒì¼ì„ lagsì— ì§€ì •í•œ ìƒíƒœ í”Œë˜ê·¸ì˜ ê°’ì— ë”°ë¼ ì—´ê³  íŒŒì¼ ê¸°ìˆ ìë¥¼ ë°˜í™˜
- íŒŒì¼ ìƒíƒœë¥¼ ì¡°ì •í•˜ëŠ” flagsê°’ë“¤ì€ `man`ìœ¼ë¡œ í™•ì¸ ê°€ëŠ¥

#### **2. open ì¸ìê°’ì™€ ë°˜í™˜ê°’**
- ì¸ì : 
    - pathname : ë””ë ‰í„°ë¦¬ê°€ í¬í•¨ëœ ê²½ë¡œ
    - flags : íŒŒì¼ ìƒíƒœ í”Œë˜ê·¸
    - mode : ì ‘ê·¼ ê¶Œí•œ
- ë°˜í™˜ : 
    - 0 : ìˆ˜í–‰ ì„±ê³µ 
    - -1 : ì‹¤íŒ¨ 

#### **3. open() ì£¼ìš” flag**
| ì¢…ë¥˜ | ê¸°ëŠ¥ |
| :---: | :---: |
| O_RDONLY | - íŒŒì¼ì„ ì½ê¸° ì „ìš©ìœ¼ë¡œ ì—´ê¸° |
| O_WRONLY | - íŒŒì¼ì„ ì“°ê¸° ì „ìš©ìœ¼ë¡œ ì—´ê¸° |
| O_RDWR | - íŒŒì¼ì„ ì½ê¸°/ì“°ê¸°ë¡œ ì—´ê¸° |
| O_CREAT | - íŒŒì¼ ìƒì„± |
| O_EXCL | - ê¸°ì¡´ì— ì—†ëŠ” íŒŒì¼ ìƒì„± <br> - ìˆì„ ì‹œ ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥ <br> - O_CREATì™€ í•¨ê»˜ ì‚¬ìš© |
| O_APPEND | - íŒŒì¼ ë§¨ ëì— ë‚´ìš©ì„ ì¶”ê°€ |
| O_TRUNC | - íŒŒì¼ ì“°ê¸° ì˜µì…˜ìœ¼ë¡œ ì—´ ë•Œ ê¸°ì¡´ ë‚´ìš© ì§€ìš°ê¸° <br> - O_CREATì™€ í•¨ê»˜ ì‚¬ìš© |
| O_SYNC <br> O_DSYNC | - íŒŒì¼ ì“°ê¸° ì‹¤í–‰ ì‹œ ì €ì¥ì¥ì¹˜ì— ì“°ê¸°ë¥¼ ë§ˆì³ì•¼ ë™ì‘ì„ ì™„ë£Œ |

- O_EXCLê³¼ O_TRUNCëŠ” O_CREATì™€ í•¨ê»˜ ì‚¬ìš©í•¨ì— ì£¼ì˜!

#### **4. í”Œë˜ê·¸ ì§€ì •**
1. ì´ë¯¸ ìˆëŠ” íŒŒì¼ì„ ì“°ê¸° ì „ìš©ìœ¼ë¡œ ì—´ê¸°

    ```O_WRONLY | O_TRUNC ```

2. ì—†ëŠ” íŒŒì¼ì„ ì“°ê¸° ì „ìš©ìœ¼ë¡œ ì—´ê¸°

    ```O_WRONLY | O_CREAT | O_TRUNC```

3. ì½ê¸° / ì“°ê¸° / ì¶”ê°€ìš©ìœ¼ë¡œ ì—´ ë•Œ 

    ```O_RDWR | O_APPEND```

4. ìƒìˆ˜ë¥¼ ì´ìš©í•´ 0644 ê¶Œí•œ ì§€ì •

    ```mode = S_IRUSR | S_IWGRO | S_IROTH```


### ğŸ¯ creat()

#### **1. ì½”ë“œ ì˜ˆì‹œ**
```
# include <sys/types.h>
# include <sys/stat.h>
# include <fcntl.h>

int creat(const char *pathname, mode_t mode);
```

- open()ê³¼ ë‹¬ë¦¬ í”Œë˜ê·¸ ì§€ì • X
- íŒŒì¼ ìƒì„±ì‹œ íŒŒì¼ ê¸°ìˆ ìê°€ ë°˜í™˜ë¨ -> íŒŒì¼ì„ ì—´ ë•Œ open() í•„ìš” ì—†ìŒ
    `creat(pathname, mode)`ì™€ `open(pathname, O_CREAT | O_WRONLY | O_TRUNC, mode)`ëŠ” ê°™ì€ ì½”ë“œ

#### **2. open ì¸ìê°’ì™€ ë°˜í™˜ê°’**
- ì¸ìê°’ :
    - pathname : íŒŒì¼ ìƒì„± ê²½ë¡œ
    - mode : ì ‘ê·¼ ê¶Œí•œ

test1.c -> test.txtíŒŒì¼ì´ ì´ë¯¸ ìˆìœ¼ë©´ ì˜¤ë¥˜ ë°œìƒ

### read()
- count : ë°”ì´íŠ¸ ë‹¨ìœ„

### write()

### lseek()

#### **1. ì½”ë“œ ì˜ˆì‹œ**
```
# include <sys/types.h>
# include <unistd.h>

off_t lseek(int fd, off_t offset, int whence);
```
#### **2. ì¸ìê°’ê³¼ ë°˜í™˜ê°’**
- ì¸ì : 
    - fd : íŒŒì¼ ê¸°ìˆ ì
    - offset : ì´ë™í•  ì˜¤í”„ì…‹ ìœ„ì¹˜
    - whence : ì˜¤í”„ì…‹ì˜ ê¸°ì¤€ ìœ„ì¹˜

#### **3. lseek í•¨ìˆ˜ì˜ íŠ¹ì§•**

## íŒŒì¼ ì…ì¶œ
### 1. O_APPEND

### 2. í‘œì¤€ ì…ë ¥, í‘œì¤€ ì¶œë ¥, í‘œì¤€ ì˜¤ë¥˜
#### redirection

#### pipe
```
ls -al | wc -1
# ë¼ì¸ì„ ì¹´ìš´íŠ¸í•´ë¼
```

test2.c
í„°ë¯¸ë„ ì¢…ë£Œ ì‹œ ctrl+cë¡œ ì¢…ë£Œ

### **dup() ** 

### **dup2() ** 

### **fcntl() ** 
```
test_5.c
// 
```

### **remove() íŒŒì¼ ì‚­ì œ**
- 

### fsync() :


## 3ï¸âƒ£ íŒŒì¼ ê¸°ìˆ ì
- ì—´ë ¤ìˆëŠ” íŒŒì¼ì„ êµ¬ë¶„í•  ëª©ì ìœ¼ë¡œ ì‹œìŠ¤í…œì—ì„œ ë¶™ì—¬ë†“ì€ ë²ˆí˜¸
- ì €ìˆ˜ì¤€ íŒŒì¼ ì…ì¶œë ¥ì—ì„œëŠ” ì—´ë¦° íŒŒì¼ì„ ì°¸ì¡°í•˜ëŠ”ë° ì‚¬ìš©í•˜ëŠ” ì§€ì‹œì ì—­í•  ìˆ˜í–‰
- íŒŒì¼ ê¸°ìˆ ìëŠ” ì •ìˆ˜ê°’
- open()ë¥¼ ì‚¬ìš©í•´ íŒŒì¼ì„ ì—´ ë•Œ ë¶€ì—¬
- í”„ë¡œì„¸ìŠ¤ê°€ íŒŒì¼ì„ ì—´ ë•Œ 0ë²ˆë¶€í„° ìˆœì„œëŒ€ë¡œ ë¶€ì—¬
![alt text](image.png)
    - 0 : í‘œì¤€ ì…ë ¥
    - 1 : í‘œì¤€ ì¶œë ¥
    - 2 : í‘œì¤€ ì˜¤ë¥˜ ì¶œë ¥
    - 3ë¶€í„° íŒŒì¼ ê¸°ìˆ ìê°€ í• ë‹¹ë¨
