
# 오류 메시지를 처리하자!

## 1️⃣ perror
### 🎯 함수 원형
```
#include <stdio.h>

void perror(const char * s);
```
- s : 출력할 문자열

### 🎯 perror() 함수의 특징
- 실행 파일과 오브젝트 파일을 모두 삭제하려면 make clean을 수행
- perror() 함수는 errno에 저장된 값을 읽어 해당 메시지를 표준오류로 출력
- 인자값(s)는 보통 프로그램의 이름으로 지정함

### 🎯 perror 예제
```
// ex_1.c

#include <sys/errno.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>

int main(void) {

   if (access("test.txt", R_OK) == -1) {
       perror("test.txt");
       exit(1);
   }
   return 0;
}

/*
실행 결과 : 
test.txt : No such file or directory
*/
```
<br>

## 2️⃣ strerror
### 🎯 함수 원형
```
# include <string.h>

char * strerror(int errnum);
```
- errnum : errno에 저장된 값

### 🎯 strerror 함수의 특징
- strerror() 함수는 ANSI C에서 추가로 정의한 함수
- 함수의 인자로 errno에 저장된 값을 받아 오류 메시지로 반환
- 반환된 오류 메시지를 사용자가 적절하게 가공할 수 있다는 장점

### 🎯 strerror 예제
```
// ex_2.c

#include <sys/errno.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

extern int errno;

int main(void) {
     char *err;

     if (access("test.txt", R_OK) == -1) {
         err = strerror(errno);
         printf("ERROR:%s(test.txt)\n", err);
         exit(1);
     }
     return 0;
}

/*
실행 결과 : 
오류 : No such file or directory(test.txt)
*/
```
<br>

---
# 메모리를 할당받자!

## 1️⃣ 메모리 할당 1 : malloc
### 🎯 함수 원형
```
# include <stdlib.h>

void* malloc(size_t size)
```
- size : 할당받을 메모리 크기

### 🎯 malloc() 함수의 특징
- 인자로 지정한 크기의 메모리를 할당
- 리턴값 : 할당받은 메모리의 시작주소(할당 성공) / NULL(할당 실패)
- 인자 : 지정할 메모리 크기 (byte 단위)
- 할당된 메모리에는 어떤 형태의 데이터도 저장 가능
- 할당된 메모리는 초기화 되지 않음

### 🎯 malloc 예제
```
char * ptr;
ptr = malloc(sizeof(char) * 100);
```
<br>

## 2️⃣ 메모리 할당 2 : calloc
### 🎯 함수 원형
```
# include <stdlib.h>

void * calloc(size_t nmemb, size_t size);
```
- nmemb : 배열 요소의 개수
- size : 할당받을 메모리 크기

### 🎯 calloc()의 특징
- nmemb x size 바이트 크기의 배열을 저장할 메모리를 할당
- 할당받을 메모리를 0으로 초기화

### 🎯 calloc() 예제
```
char * ptr;
ptr = calloc(200);

// 요소가 10개이고 각 요소의 크기가 20byte인 배열을 저장할 수 있는 메모리를 할당받는 예시
```
<br>

## 3️⃣ 메모리 재할당 : realloc
### 🎯 함수 원형
```
# include <stdlib.h>
void *realloc(void *ptr, size_t size)
```
- ptr : 할당받을 메모리를 가리키는 포인터
- size : 할당받을 메모리 크기

### 🎯 realloc()의 특징
- 이미 할당받은 메모리에 추가로 메모리를 할당할 때 사용
- 이전 메모리의 내용을 새로 할당된 메모리로 복사

### 🎯 realloc() 예제
```
char *ptr, *new;
ptr = malloc(sizeof(char) * 100);
new = realloc(ptr, 100)
```
<br>

## 4️⃣ 메모리 해제 : free
### 🎯 free() 예제
```
# include <stdlib.h>
void free(void *ptr)
```
- ptr : 해제할 메모리 주소

### 🎯 free() 함수의 특징
- 사용한 메모리를 해제하고 반납
<br>

---
# 명령행 인자 활용해보자!
## 1️⃣ 명령행 인자
### 🎯 명령행
- 리눅스 시스템에서 사용자가 명령을 입력하는 행
- 프롬프트가 나타나고 커서가 사용자 입력을 기다리고 있는 행

### 🎯 CLA
- 사용자가 명령행에서 명령을 실행할 때 해당 명령과 함께 지젖ㅇ하는 인자
- 명령행 인자는 명령의 옵션, 옵션의 인자, 명령의 인자로 구성

### 🎯 명령행 인자의 전달
```
int main(int argc, char *argv[]) {}
```
- argc : 명령행 인자의 갯수
- argv : 명령행 인자들

## 2️⃣ 명령행 인자 예시
```
// ex_3.c

#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <errno.h>

int main(int argc, char *argv[]) {

        int n;

        printf("argc = %d\n", argc);
        for (n=0; n<argc; n++) {
                printf("argv[%d] = %s\n", n, argv[n]);
        }

        return(0);
}

/*
실행 예시:
$ ./cla_ex arg1 arg2 arg3
argc = 4
argv[0] = ./cla_ex
argv[1] = arg1
argv[2] = arg2
argv[3] = arg3
*/
```